'use strict';function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var FormDataJson=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"getInputValue",value:function getInputValue(b){if(b instanceof HTMLSelectElement){for(var c,d=[],e=0;e<b.options.length;e++)c=b.options[e],c.selected&&d.push(("undefined"==typeof c.value?c.text:c.value).toString());return b.multiple?d:d.length?d[0]:null}return b instanceof HTMLInputElement&&-1<a.checkedInputTypes.indexOf(b.type.toLowerCase())?b.checked?b.value:null:b.value}},{key:"setInputValue",value:function setInputValue(b,c){var d=(b.type||"text").toLowerCase();if(b instanceof HTMLInputElement&&-1<a.checkedInputTypes.indexOf(d))b.checked=c===b.value;else if(b instanceof HTMLSelectElement){a.isArray(c)||(c=[c]);for(var g=0;g<b.options.length;g++){var e=b.options[g],f="undefined"==typeof e.value?e.text:e.value;e.selected=-1<c.indexOf(f)}}else b.value=c}},{key:"formToJson",value:function formToJson(b,c){if(c&&!(c instanceof FormDataJsonOptions))return void console.error("Options are not an instance of FormDataJsonOptions");c=c||new FormDataJsonOptions;for(var d={},e=b.querySelectorAll("select, textarea, input, button"),f={},g=0;g<e.length;g++){var h=e[g],k=(h.type||"text").toLowerCase();if(h.name&&0!==h.name.length&&(c.includeDisabled||!h.disabled)){var l=a.getInputValue(h);if(!c.includeButtonValues&&(h instanceof HTMLButtonElement||-1<a.buttonInputTypes.indexOf(k)))continue;for(var m,n=h instanceof HTMLSelectElement&&h.multiple,p=d,q=h.name.split("["),r=q.length,s=0;s<r;s++)if(m=q[s],0<s&&(m=m.substr(0,m.length-1)),0===m.length&&("undefined"==typeof f[h.name]&&(f[h.name]=0),m=f[h.name].toString(),f[h.name]++),n&&s===q.length-2){p[m]=l;break}else if(s===q.length-1){if("radio"===k&&"undefined"!=typeof p[m])break;p[m]=l,c.includeUncheckedAsNull||null!==l||delete p[m]}else"object"!==_typeof(p[m])&&(p[m]={}),p=p[m]}}return d}},{key:"fillFormFromJsonValues",value:function fillFormFromJsonValues(b,c,d,e){if(d&&!(d instanceof FormDataJsonOptions))return void console.error("Options are not an instance of FormDataJsonOptions");if(c){d=d||new FormDataJsonOptions,d.unsetAllInputsOnFill&&a.unsetFormInputs(b);for(var f={},g={},h=b.querySelectorAll("select, textarea, input, button"),k=0;k<h.length;k++){var l=h[k],m=l.name,n=l instanceof HTMLSelectElement&&l.multiple;if(m&&0!==m.length&&(g[m]=l,m.match(/\[\]/))){var s=m.split("[]");n&&(s=m.substr(0,m.length-2).split("[]"));for(var o="",p=0;p<s.length;p++)s[p].length&&(o+=s[p]+"[]","undefined"==typeof f[o]&&(f[o]=-1),f[o]++,o=o.replace(/\[\]/,"["+f[o]+"]"));n&&(o+="[]"),g[o]=l}}for(var t in c){var q=c[t],r=e?e+"["+t+"]":t;a.isArray(q)&&(r+="[]");var u=g[r]||null;"object"!==_typeof(q)||a.isArray(q)?u&&a.setInputValue(u,q):a.fillFormFromJsonValues(b,q,d,r)}}}},{key:"unsetFormInputs",value:function unsetFormInputs(b){for(var c,d=b.querySelectorAll("select, textarea, input"),e=0;e<d.length;e++)(c=(d[e].type||"text").toLowerCase(),!(-1<a.buttonInputTypes.indexOf(c)))&&a.setInputValue(d[e],null)}},{key:"isArray",value:function isArray(a){return"object"===_typeof(a)&&"[object Array]"===Object.prototype.toString.call(a)}}]),a}();_defineProperty(FormDataJson,"buttonInputTypes",["button","submit","reset","image"]),_defineProperty(FormDataJson,"checkedInputTypes",["checkbox","radio"]);var FormDataJsonOptions=function(){function a(b){_classCallCheck(this,a),_defineProperty(this,"includeDisabled",!1),_defineProperty(this,"includeUncheckedAsNull",!1),_defineProperty(this,"includeButtonValues",!1),_defineProperty(this,"unsetAllInputsOnFill",!1),this.merge(b)}return _createClass(a,[{key:"merge",value:function merge(a){if("object"===_typeof(a))for(var b in a)this[b]=a[b]}}]),a}();